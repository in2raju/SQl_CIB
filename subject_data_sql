DROP TABLE MRACIB.CIB_SUBJECT_DATA CASCADE CONSTRAINTS;

CREATE TABLE MRACIB.CIB_SUBJECT_DATA
(
  MFICODE                 VARCHAR2(50 BYTE),
  ACCOUNTINGDATE          VARCHAR2(50 BYTE),
  PRODUCTIONDATE          VARCHAR2(50 BYTE),
  RECORD_NO               NUMBER,
  BRANCH_CODE             VARCHAR2(50 BYTE),
  MEMBERID                VARCHAR2(50 BYTE),
  NAME                    VARCHAR2(255 BYTE),
  OCCUPATION              VARCHAR2(100 BYTE),
  FATHERS_NAME            VARCHAR2(255 BYTE),
  MOTHERS_NAME            VARCHAR2(255 BYTE),
  MARITAL_STATUS          VARCHAR2(20 BYTE),
  SPOUSE_NAME             VARCHAR2(255 BYTE),
  GENDER                  VARCHAR2(1 BYTE),
  DOB                     VARCHAR2(20 BYTE),
  NID                     VARCHAR2(50 BYTE),
  SMARTCARD_NO            VARCHAR2(50 BYTE),
  BIRTH_CERTIFICATE_NO    VARCHAR2(50 BYTE),
  TIN                     VARCHAR2(50 BYTE),
  OTHER_ID_TYPE           VARCHAR2(50 BYTE),
  OTHER_ID_NO             VARCHAR2(50 BYTE),
  EXPIRY_DATE             VARCHAR2(20 BYTE),
  ISSUE_COUNTRY           VARCHAR2(100 BYTE),
  CONTACTNO               VARCHAR2(20 BYTE),
  P_ADDRESS               VARCHAR2(255 BYTE),
  P_THANA                 VARCHAR2(100 BYTE),
  P_DISTRICT              VARCHAR2(100 BYTE),
  P_COUNTRY               VARCHAR2(100 BYTE),
  PR_ADDRESS              VARCHAR2(255 BYTE),
  PR_THANA                VARCHAR2(100 BYTE),
  PR_DISTRICT             VARCHAR2(100 BYTE),
  PR_COUNTRY              VARCHAR2(100 BYTE),
  ACADEMIC_QUALIFICATION  VARCHAR2(100 BYTE),
  ENTRY_USER              VARCHAR2(50 BYTE)     DEFAULT USER,
  ENTRY_DATE              DATE                  DEFAULT SYSDATE
)
TABLESPACE USERS
PCTUSED    0
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            BUFFER_POOL      DEFAULT
           )
LOGGING 
NOCOMPRESS 
NOCACHE
MONITORING;


CREATE OR REPLACE TRIGGER MRACIB."CIB_SUBJECT_DATA_UPLOAD_TRGGER" 
BEFORE INSERT ON MRACIB.CIB_SUBJECT_DATA
FOR EACH ROW
DECLARE
BEGIN
  IF :NEW.ENTRY_USER IS NULL THEN
    :NEW.ENTRY_USER := USER;
  END IF;
  IF :NEW.ENTRY_DATE IS NULL THEN
    :NEW.ENTRY_DATE := SYSDATE;
  END IF;
END;
/
